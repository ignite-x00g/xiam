<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DMM Error Checker Demo</title>
    <style>
        body { font-family: sans-serif; margin: 20px; }
        .fab { padding: 10px; margin: 5px; background-color: lightblue; border: 1px solid blue; cursor: pointer; }
        .service-nav-item { padding: 8px; margin: 5px; background-color: lightcoral; border: 1px solid red; cursor: pointer; }
        .modal { border: 1px solid #ccc; padding: 20px; margin-top: 10px; background-color: #f9f9f9; display: none; } /* Initially hidden */
        .services-navigation { border: 1px dashed green; padding: 10px; margin-bottom: 10px;}
        h2 { margin-top: 30px; }
    </style>
</head>
<body>
    <h1>Dynamic Modal Manager (DMM) Error Checker Demo</h1>

    <p>Open your browser's developer console to see the error checker's output.</p>

    <h2>FABs (data-modal-target)</h2>
    <button class="fab" id="fab-contact" data-modal-target="contact-us-modal">Contact Us FAB</button>
    <button class="fab" id="fab-chatbot" data-modal-target="chatbot-modal">Chatbot FAB</button>
    <button class="fab" id="fab-missing-modal" data-modal-target="non-existent-modal">FAB with Missing Modal</button>
    <button class="fab" id="fab-empty-target" data-modal-target="">FAB with Empty Target</button>
    <button class="fab" id="fab-no-target">FAB with No Target Attribute</button>


    <h2>Service Navigation (data-service-target)</h2>
    <div class="services-navigation">
        <button class="service-nav-item" id="service-ops" data-service-target="business-operations-modal">Business Operations</button>
        <button class="service-nav-item" id="service-support" data-service-target="customer-support-modal">Customer Support</button>
        <button class="service-nav-item" id="service-missing" data-service-target="missing-service-modal">Service with Missing Modal</button>
    </div>

    <!-- This one is outside the .services-navigation to test the selector specificity -->
    <button class="service-nav-item" id="service-outside" data-service-target="other-modal">Other Service (Outside Nav)</button>


    <h2>Modals</h2>
    <!-- Correctly placed modal -->
    <div id="contact-us-modal" class="modal">Contact Us Modal Content</div>

    <!-- Modal placed BEFORE its trigger (for testing order warning) -->
    <div id="early-modal" class="modal">Early Modal Content</div>
    <button class="fab" id="fab-early-modal" data-modal-target="early-modal">FAB for Early Modal</button>

    <div id="chatbot-modal" class="modal">Chatbot Modal Content</div>
    <div id="business-operations-modal" class="modal">Business Operations Modal Content</div>
    <!-- customer-support-modal is intentionally missing for testing -->
    <div id="other-modal" class="modal">Other Modal Content</div>


    <h2>Script Loading Tests</h2>
    <!-- Test case 1: Correctly deferred script -->
    <script src="js/dynamic-modal-manager.js" defer></script>

    <!-- Test case 2: Script not deferred (should warn if not at end of body) -->
    <script src="js/dynamic-modal-manager.js"></script>
    <p>Some content after a non-deferred script.</p>


    <!-- The error checker script itself -->
    <script src="js/dmm-error-checker.js"></script>
    <script>
        // Run the checks after the DOM is fully loaded
        document.addEventListener('DOMContentLoaded', function() {
            console.log("DOM fully loaded. Running DMM Error Checks...");
            runAllDMMErrorsChecks();
        });
    </script>
    <!-- This dynamic-modal-manager.js is intentionally here to test the "not last element" case -->
    <script src="js/dynamic-modal-manager.js"></script>
</body>
</html>
